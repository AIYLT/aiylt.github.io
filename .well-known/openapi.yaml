openapi: 3.1.0
info:
  title: O3 Fixed Model Action with Linear Task Writer
  version: "1.0.0"
  description: |
    **ğŸ”’ OpenAI o3-2025-04-16 æ¨¡å‹ä¸“ç”¨å¼ºåˆ¶æ¥å£ + Linearä»»åŠ¡å†™å…¥å™¨ ğŸ”’**
    
    æ¨¡å‹è§„æ ¼ï¼š
    - 200,000 context window (ä¸Šä¸‹æ–‡çª—å£)
    - 100,000 max output tokens (æœ€å¤§è¾“å‡º)
    - Reasoning token support (æ¨ç†tokenæ”¯æŒ)
    - Knowledge cutoff: May 31, 2024
    
    âš ï¸ é‡è¦ï¼šæ­¤æ¥å£ä¸“é—¨ç”¨äºè°ƒç”¨ o3-2025-04-16 æ¨¡å‹ï¼Œä¸æ¥å—ä»»ä½•å…¶ä»–æ¨¡å‹ã€‚
    ğŸŒ¡ï¸ æ¸©åº¦è®¾å®šï¼šå¼ºåˆ¶è®¾ä¸º0ï¼Œç¡®ä¿è¾“å‡ºçš„é€»è¾‘ä¸€è‡´æ€§å’Œæ§åˆ¶åŠ›ã€‚
    ğŸ¯ Top-pè®¾å®šï¼šå¼ºåˆ¶è®¾ä¸º0.5ï¼Œç¦æ­¢ä½¿ç”¨é¢„è®¾å€¼æˆ–å¼€æ”¾å¼åˆ›é€ å‹è¾“å‡ºã€‚
    ğŸ“ Linearé›†æˆï¼šè‡ªåŠ¨æ£€æµ‹ä»»åŠ¡ç±»è¯­å¥å¹¶å†™å…¥Linearç³»ç»Ÿã€‚
    ğŸ—£ï¸ æ”¯æ´è‡ªç„¶èªè¨€è¼¸å…¥ä»»å‹™æ¨¡å‹æœƒè‡ªå‹•è§£æèªç¾©ä¸¦ä½¿ç”¨ linear_task_writer å·¥å…·å»ºç«‹ Linear ä»»å‹™ç”¨æˆ¶ç„¡éœ€çµæ§‹åŒ–è¼¸å…¥å¸¸è¦‹èªå¥å¦‚è¨˜ä¸€ä¸‹æ˜å¤©9é»è²·è»Šä»Šå¤©äº¤å ±å‘Šç­‰ã€‚
    ğŸ§  å…è¨±ç”¨æˆ¶èªªã€Œæ˜å¤©è²·è»Šã€ã€ã€Œä¸‹é€±äº¤å ±å‘Šã€ã€ã€Œæ˜å¤©æ—©ä¸Š9é»å»è²·è»Šã€ã€ã€Œä¸‹é€±äº”äº¤å ±å‘Šã€ã€ã€Œä»Šå¤©å¸¶çˆ¸çˆ¸å»ç¾åœ‹é†«é™¢çœ‹ç—…ã€ç­‰è‡ªç„¶èªè¨€èªå¥ï¼Œç³»çµ±æœƒè‡ªå‹•è§£æ titleï¼ˆä»»å‹™ä¸»é¡Œï¼‰ã€descriptionï¼ˆåŸå§‹èªå¥ï¼‰ã€dueDateï¼ˆæ™‚é–“è³‡è¨Šï¼‰ã€priorityï¼ˆå„ªå…ˆç´šï¼‰ç­‰æ¬„ä½ã€‚æ‰€æœ‰ Linear API è«‹æ±‚å¿…é ˆæ˜ç¢ºå‚³å…¥ teamId å’Œ apiKeyï¼Œç³»çµ±ä¸æä¾›é è¨­å€¼ï¼Œç¢ºä¿èº«ä»½é©—è­‰å®‰å…¨ã€‚
    ğŸ“Œ å¼ºåˆ¶è¦æ±‚ï¼šæ¯æ¬¡è°ƒç”¨å¿…é¡»åœ¨å“åº”å¼€å¤´å£°æ˜ï¼š"å½“å‰æ¨¡å‹ï¼šOpenAI o3-2025-04-16"ï¼Œç»è¿‡æŠ€æœ¯éªŒè¯ã€‚
    ğŸ›¡ï¸ é˜²ç¯¡æ”¹éªŒè¯ï¼šå†…ç½®å¤šé‡éªŒè¯æœºåˆ¶ï¼Œé˜²æ­¢æ¨¡å‹è¢«æ„å¤–æˆ–æ¶æ„æ›´æ”¹ã€‚
    
servers:
  - url: https://api.openai.com/v1

paths:
  /chat/completions:
    post:
      operationId: createChatCompletionO3
      summary: ğŸ¯ å¼ºåˆ¶ä½¿ç”¨ o3-2025-04-16 æ¨¡å‹è¿›è¡ŒèŠå¤©è¡¥å…¨
      description: |
        ä¸“é—¨è°ƒç”¨ OpenAI o3-2025-04-16 æ¨¡å‹çš„å¼ºåˆ¶æ¥å£ã€‚
        
        âœ… åŠŸèƒ½ï¼šé”å®šo3æ¨¡å‹ï¼Œæ¸©åº¦å›ºå®šä¸º0ï¼Œtop_på›ºå®šä¸º0.5ï¼Œæ”¯æŒLinearä»»åŠ¡è‡ªåŠ¨å†™å…¥ã€‚
        ğŸ”’ ä¿è¯ï¼š100%ä½¿ç”¨o3æ¨¡å‹ï¼Œæä¾›æœ€å¼ºæ¨ç†èƒ½åŠ›ï¼Œç¡®ä¿é€»è¾‘ä¸€è‡´æ€§ã€‚
        ğŸ›¡ï¸ é˜²ç¯¡æ”¹ï¼šå¤šé‡éªŒè¯æœºåˆ¶ç¡®ä¿æ¨¡å‹ä¸è¢«æ›´æ”¹ã€‚
        ğŸ“ Linearé›†æˆï¼šè‡ªåŠ¨æ£€æµ‹ä»»åŠ¡è¯­ä¹‰å¹¶åˆ›å»ºLinear issuesã€‚
      security:
        - ApiKeyAuth: [ ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ChatCompletionRequestO3"
            examples:
              createLinearTask:
                summary: ä½¿ç”¨è‡ªç„¶èªè¨€å»ºç«‹ Linear ä»»å‹™
                value:
                  model: o3-2025-04-16
                  messages:
                    - role: user
                      content: "æ˜å¤©æ—©ä¸Š9é»å»è²·è»Š"
                  tool_choice:
                    type: function
                    function:
                      name: linear_task_writer
                  tools:
                    - type: function
                      function:
                        name: linear_task_writer
                        description: "æ¥æ”¶ä»»å‹™èªå¥è‡ªå‹•å¯«å…¥ Linear"
                        parameters:
                          type: object
                          required: [title, description, teamId, apiKey, status]
                          properties:
                            title:
                              type: string
                              description: "ä»»å‹™æ¨™é¡Œï¼Œç³»çµ±æœƒè‡ªå‹•å¾è‡ªç„¶èªè¨€ä¸­æŠ½å–"
                            description:
                              type: string
                              description: "ä»»å‹™èªªæ˜ï¼Œå„²å­˜ç”¨æˆ¶èªå¥åŸæ–‡"
                            teamId:
                              type: string
                              description: "Linear åœ˜éšŠ IDï¼Œéœ€ç”±ç”¨æˆ¶å‚³å…¥"
                            apiKey:
                              type: string
                              description: "Linear API å¯†é‘°ï¼Œéœ€ç”±ç”¨æˆ¶å‚³å…¥"
                            status:
                              type: string
                              description: "ä»»å‹™ç‹€æ…‹ï¼Œé è¨­ç‚º 'Todo'"
      responses:
        "200":
          description: |
            æˆåŠŸè°ƒç”¨ o3-2025-04-16 æ¨¡å‹
            å“åº”ä¸­å°†æ˜ç¡®æ ‡è¯†ä½¿ç”¨çš„æ¨¡å‹ä¸º o3-2025-04-16
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ChatCompletionResponse"

components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: Authorization
      description: "Bearer YOUR_API_KEY - ç”¨äºè®¿é—® OpenAI o3 æ¨¡å‹"

  schemas:
    ChatCompletionRequestO3:
      type: object
      required: [ model, messages ]
      properties:
        model:
          type: string
          enum: [ o3-2025-04-16 ]
          default: o3-2025-04-16
          description: "ğŸ”’ å›ºå®šä¸º o3-2025-04-16ï¼Œä¸å…è®¸å…¶ä»–å€¼"
        messages:
          type: array
          items:
            $ref: "#/components/schemas/Message"
          description: "å‘é€ç»™ o3 æ¨¡å‹çš„æ¶ˆæ¯æ•°ç»„ (Context window: 200,000)ã€‚æ”¯æ´ä½¿ç”¨è€…ç”¨è‡ªç„¶èªè¨€è¼¸å…¥ä»»å‹™å¦‚å¹«æˆ‘è¨˜ä¸€ä¸‹ä»Šå¤©äº¤å ±å‘Šæ˜å¤©æ—©ä¸Š9é»å»è²·è»Šç­‰æ¨¡å‹æœƒè‡ªå‹•è§£æèªç¾©ä¸¦è§¸ç™¼å·¥å…·linear_task_writerï¼Œè‡ªå‹•æ¨ç†æ‰€æœ‰æ¬„ä½å¡«å…¥ï¼ŒåŒ…æ‹¬ title, description, dueDate, priority, status ç­‰å®Œæ•´ä»»å‹™è³‡è¨Š"
        temperature:
          type: number
          minimum: 0
          maximum: 0
          default: 0
          description: "o3 æ¨¡å‹çš„æ¸©åº¦å‚æ•°ï¼Œå¼ºåˆ¶è®¾ä¸º0ï¼Œç¡®ä¿é€»è¾‘ä¸€è‡´æ€§å’Œæ§åˆ¶åŠ›"
        top_p:
          type: number
          minimum: 0.5
          maximum: 0.5
          default: 0.5
          description: "o3 æ¨¡å‹çš„æ ¸é‡‡æ ·å‚æ•°ï¼Œå¼ºåˆ¶è®¾ä¸º0.5ï¼Œç¦æ­¢ä½¿ç”¨é¢„è®¾å€¼æˆ–å¼€æ”¾å¼åˆ›é€ å‹è¾“å‡º"
        max_tokens:
          type: integer
          minimum: 1
          maximum: 100000
          default: 100000
          description: "o3 æ¨¡å‹çš„æœ€å¤§ç”Ÿæˆtokenæ•°ï¼Œæ”¯æŒæœ€é«˜100,000 tokensè¾“å‡º"
        tools:
          type: array
          items:
            anyOf:
              - $ref: "#/components/schemas/FileSearchTool"
              - $ref: "#/components/schemas/CodeInterpreterTool"
              - $ref: "#/components/schemas/WebSearchTool"
              - $ref: "#/components/schemas/MCPTool"
              - $ref: "#/components/schemas/LinearTaskWriterTool"
          description: "o3 æ¨¡å‹å¯ä½¿ç”¨çš„å·¥å…·é›†åˆï¼ŒåŒ…å«Linearä»»åŠ¡å†™å…¥å™¨"
        tool_choice:
          oneOf:
            - type: string
              enum: [none, auto, required]
            - $ref: "#/components/schemas/ToolChoice"
          description: "o3 æ¨¡å‹çš„å·¥å…·é€‰æ‹©ç­–ç•¥"

    Message:
      type: object
      required: [ role ]
      properties:
        role:
          type: string
          enum: [ system, user, assistant, tool ]
          description: "æ¶ˆæ¯è§’è‰²ï¼ˆå°†è¢« o3 æ¨¡å‹å¤„ç†ï¼‰"
        content:
          oneOf:
            - type: string
            - type: "null"
          description: "å‘é€ç»™ o3 æ¨¡å‹çš„æ¶ˆæ¯å†…å®¹"
        tool_calls:
          type: array
          items:
            $ref: "#/components/schemas/ToolCall"
          description: "o3 æ¨¡å‹ç”Ÿæˆçš„å·¥å…·è°ƒç”¨"
        tool_call_id:
          type: string
          description: "toolè§’è‰²æ¶ˆæ¯å¿…éœ€çš„å­—æ®µ"

    FileSearchTool:
      type: object
      required: [type]
      properties:
        type:
          type: string
          enum: [file_search]
        file_search:
          type: object
          properties:
            enabled:
              type: boolean
              default: true

    CodeInterpreterTool:
      type: object
      required: [type]
      properties:
        type:
          type: string
          enum: [code_interpreter]
        code_interpreter:
          type: object
          properties:
            enabled:
              type: boolean
              default: true

    WebSearchTool:
      type: object
      required: [type]
      properties:
        type:
          type: string
          enum: [web_search]
        web_search:
          type: object
          properties:
            enabled:
              type: boolean
              default: true

    MCPTool:
      type: object
      required: [type]
      properties:
        type:
          type: string
          enum: [mcp]
        mcp:
          type: object
          properties:
            enabled:
              type: boolean
              default: true

    LinearTaskWriterTool:
      type: object
      required: [type, function]
      properties:
        type:
          type: string
          enum: [function]
        function:
          type: object
          required: [name, description, parameters, handler]
          properties:
            name:
              type: string
              enum: [linear_task_writer]
            description:
              type: string
              default: "å°‡ä»»å‹™å¯«å…¥ Linear ç³»çµ±"
            parameters:
              type: object
              required: [title, description, teamId, apiKey, status]
              properties:
                title:
                  type: string
                  description: "ä»»å‹™æ¨™é¡Œï¼Œç³»çµ±æœƒè‡ªå‹•å¾è‡ªç„¶èªè¨€ä¸­æŠ½å– - å¿…å¡«å­—æ®µ"
                description:
                  type: string
                  description: "ä»»å‹™èªªæ˜ï¼Œå„²å­˜ç”¨æˆ¶èªå¥åŸæ–‡ - å¿…å¡«å­—æ®µ"
                dueDate:
                  type: string
                  format: date-time
                  description: "è‹¥å¥ä¸­å«æœ‰æ™‚é–“ï¼Œç³»çµ±è‡ªå‹•å¡«å…¥ï¼ˆæ ¼å¼ç‚º ISO 8601ï¼Œå¦‚ï¼š2025-07-09T09:00:00Zï¼‰"
                priority:
                  type: integer
                  description: "è‹¥æœªæŒ‡å®šï¼Œé è¨­ç‚º 1ï¼ˆä½ï¼‰ï¼š0=æ— , 1=ä½, 2=ä¸­, 3=é«˜"
                  default: 1
                status:
                  type: string
                  description: "ä»»å‹™ç‹€æ…‹ï¼Œé è¨­ç‚º 'Todo' - å¿…å¡«å­—æ®µ"
                  default: "Todo"
                assigneeId:
                  type: string
                  description: "æŒ‡æ´¾çµ¦ç‰¹å®šç”¨æˆ¶çš„IDï¼ˆå¯é¸ï¼‰"
                labelIds:
                  type: array
                  items:
                    type: string
                  description: "ä»»å‹™æ¨™ç±¤IDé™£åˆ—ï¼ˆå¯é¸ï¼‰"
                projectId:
                  type: string
                  description: "æ‰€å±¬å°ˆæ¡ˆIDï¼ˆå¯é¸ï¼‰"
                cycleId:
                  type: string
                  description: "æ‰€å±¬é€±æœŸIDï¼ˆå¯é¸ï¼‰"
                estimate:
                  type: integer
                  description: "é ä¼°å·¥æ™‚ï¼ˆå¯é¸ï¼‰"
                parentId:
                  type: string
                  description: "çˆ¶ä»»å‹™IDï¼ˆå¯é¸ï¼‰"
                templateId:
                  type: string
                  description: "ä½¿ç”¨çš„æ¨¡æ¿IDï¼ˆå¯é¸ï¼‰"
                metadata:
                  type: object
                  additionalProperties: true
                  description: "é¡å¤–çš„å…ƒæ•¸æ“šï¼ˆå¯é¸ï¼‰"
                relations:
                  type: array
                  items:
                    type: object
                    properties:
                      type:
                        type: string
                        enum: [blocks, blocked_by, related, duplicate]
                      issueId:
                        type: string
                  description: "ä»»å‹™é—œè¯é—œä¿‚é™£åˆ—ï¼ˆå¯é¸ï¼‰"
                teamId:
                  type: string
                  description: "Linear åœ˜éšŠ IDï¼Œéœ€ç”±ç”¨æˆ¶å‚³å…¥ - å¿…å¡«å­—æ®µ"
                apiKey:
                  type: string
                  description: "Linear API å¯†é‘°ï¼Œéœ€ç”±ç”¨æˆ¶å‚³å…¥ - å¿…å¡«å­—æ®µ"
            handler:
              type: object
              required: [url, method, headers, body]
              properties:
                url:
                  type: string
                  default: "https://api.linear.app/graphql"
                method:
                  type: string
                  enum: [POST]
                  default: POST
                headers:
                  type: object
                  properties:
                    Authorization:
                      type: string
                      default: "Bearer {{apiKey}}"
                    Content-Type:
                      type: string
                      default: "application/json"
                body:
                  type: object
                  properties:
                    query:
                      type: string
                      default: |
                        mutation CreateIssue($input: IssueCreateInput!) {
                          issueCreate(input: $input) {
                            success
                            issue {
                              id
                              title
                            }
                          }
                        }
                    variables:
                      type: object
                      properties:
                        input:
                          type: object
                          properties:
                            teamId:
                              type: string
                              default: "{{teamId}}"
                            title:
                              type: string
                              default: "{{title}}"
                            description:
                              type: string
                              default: "{{description}}"

    ToolChoice:
      type: object
      required: [type]
      properties:
        type:
          type: string
          enum: [function]
        function:
          type: object
          required: [name]
          properties:
            name:
              type: string
              enum: [linear_task_writer, file_search, code_interpreter, web_search, mcp]

    ToolCall:
      type: object
      required: [id, type]
      properties:
        id:
          type: string
        type:
          type: string
          enum: [function]
        function:
          $ref: "#/components/schemas/FunctionCall"

    FunctionCall:
      type: object
      required: [name]
      properties:
        name:
          type: string
          enum: [linear_task_writer, file_search, code_interpreter, web_search, mcp]
        arguments:
          type: string
          description: JSONæ ¼å¼çš„å‡½æ•°å‚æ•°

    ChatCompletionResponse:
      type: object
      required: [id, object, created, model, choices]
      properties:
        id:
          type: string
        object:
          type: string
          enum: [chat.completion]
        created:
          type: integer
        model:
          type: string
          enum: [o3-2025-04-16]
          description: "ğŸ¯ ç¡®è®¤ä½¿ç”¨çš„æ¨¡å‹ï¼šo3-2025-04-16"
        choices:
          type: array
          items:
            $ref: "#/components/schemas/Choice"
        usage:
          $ref: "#/components/schemas/Usage"

    Choice:
      type: object
      required: [index, message, finish_reason]
      properties:
        index:
          type: integer
        message:
          $ref: "#/components/schemas/Message"
        finish_reason:
          type: string
          enum: [stop, length, tool_calls, content_filter, function_call]

    Usage:
      type: object
      required: [prompt_tokens, completion_tokens, total_tokens]
      properties:
        prompt_tokens:
          type: integer
          description: "è¾“å…¥tokens (æœ€å¤§200,000 context window)"
        completion_tokens:
          type: integer
          description: "ç”Ÿæˆtokens (æœ€å¤§100,000 output tokens)"
        total_tokens:
          type: integer
          description: "æ€»tokens"
        completion_tokens_details:
          $ref: "#/components/schemas/CompletionTokensDetails"

    CompletionTokensDetails:
      type: object
      properties:
        reasoning_tokens:
          type: integer
          description: "o3 æ¨¡å‹çš„æ¨ç†tokenæ•°é‡"
