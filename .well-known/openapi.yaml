openapi: 3.1.0
info:
  title: O3 Stock Analysis System - Multi-Level Performance Edition
  version: "6.0.0"
  description: |
    **ğŸ¯ o3è‚¡ç¥¨åˆ†æç³»ç»Ÿ - åˆ†çº§æ€§èƒ½ç‰ˆ (åŸºäºçœŸå®o3å®šä»·)**

    ## ğŸš€ äº”çº§æ€§èƒ½é…ç½®
    
    | çº§åˆ« | æˆæœ¬/æ¬¡ | æœˆè´¹(50æ¬¡) | é€‚ç”¨åœºæ™¯ | é…ç½®è§„æ ¼ |
    |------|---------|------------|----------|----------|
    | âš¡ Lightning | $0.03 | $1.50 | å¿«é€ŸéªŒè¯ã€ç®€å•æŸ¥è¯¢ | 14k tokens, 3å·¥å…· |
    | ğŸš€ Turbo | $0.10 | $5.00 | æ ‡å‡†åˆ†æã€æ—¥å¸¸äº¤æ˜“ | 40k tokens, 6å·¥å…· |
    | ğŸ”¥ Pro | $0.22 | $11.00 | æ·±åº¦åˆ†æã€ç­–ç•¥åˆ¶å®š | 82k tokens, 10å·¥å…· |
    | ğŸ’ Elite | $0.41 | $20.50 | æœºæ„çº§åˆ†æã€é‡å¤§å†³ç­– | 140k tokens, 13å·¥å…· |
    | ğŸŒŸ Ultimate | $0.65 | $32.50 | æé™åˆ†æã€ç ”ç©¶æŠ¥å‘Š | 200k tokens, 15å·¥å…· |

    ## ğŸ”¥ æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§
    - **ğŸ”’ æ¨¡å‹é”å®š**: o3-2025-04-16 (200kä¸Šä¸‹æ–‡ + 100kè¾“å‡º + æ¨ç†ä»¤ç‰Œæ”¯æŒ)
    - **ğŸ“Š æ™ºèƒ½åˆ†çº§**: æ ¹æ®éœ€æ±‚è‡ªåŠ¨æ¨èæˆ–æ‰‹åŠ¨é€‰æ‹©æ€§èƒ½çº§åˆ«
    - **ğŸš€ å¹¶è¡Œæ‰§è¡Œ**: æ¯çº§åˆ«ä¼˜åŒ–çš„å·¥å…·å¹¶è¡Œè°ƒç”¨
    - **â° å¤šæ—¶é—´ç»´åº¦**: ä»1åˆ†é’Ÿåˆ°æœˆçº¿çš„å®Œæ•´æŠ€æœ¯åˆ†æ
    - **ğŸ“° å®æ—¶æ–°é—»**: è‡ªåŠ¨æŠ“å– + AIæƒ…æ„Ÿåˆ†æ + å½±å“åŠ›è¯„åˆ†
    - **ğŸ¯ äº”å±‚å“åº”**: æ¨ç†â†’åˆ†æâ†’ç­–ç•¥â†’é£æ§â†’ç”¨æˆ·å±•ç¤º
    - **ğŸ’° æˆæœ¬é€æ˜**: åŸºäºOpenAIå®˜æ–¹å®šä»·çš„ç²¾ç¡®è®¡ç®—
    - **ğŸ”§ çµæ´»é…ç½®**: æ”¯æŒè‡ªåŠ¨å‡çº§å’Œé¢„ç®—æ§åˆ¶
    - **âœ… æ ‡å‡†å…¼å®¹**: å®Œå…¨å…¼å®¹OpenAI Chat Completions API

servers:
  - url: https://api.openai.com/v1
    description: OpenAI API v1
  - url: https://api.openai.com/v2  
    description: OpenAI API v2 (if available)

paths:
  /chat/completions:
    post:
      operationId: createChatCompletionO3MultiLevel
      summary: o3è‚¡ç¥¨åˆ†æç³»ç»Ÿ - å¤šçº§åˆ«é…ç½®
      description: |
        **ğŸ¯ æ™ºèƒ½åˆ†çº§è‚¡ç¥¨åˆ†æç³»ç»Ÿ**
        
        æ”¯æŒ5ä¸ªæ€§èƒ½çº§åˆ«ï¼Œç”¨æˆ·å¯æ ¹æ®åˆ†æéœ€æ±‚ã€æˆæœ¬é¢„ç®—é€‰æ‹©ï¼š
        - è‡ªåŠ¨æ£€æµ‹å¹¶æ¨èæœ€é€‚åˆçš„çº§åˆ«
        - æ‰‹åŠ¨æŒ‡å®šperformance_levelå‚æ•°
        - æ”¯æŒé¢„ç®—æ§åˆ¶å’Œè‡ªåŠ¨å‡çº§
        - å®Œå…¨åŸºäºOpenAI o3å®˜æ–¹å®šä»·
        
        **ğŸ“Š è‡ªåŠ¨è§¦å‘æœºåˆ¶**:
        - ç®€å•æ–‡å­—æŸ¥è¯¢ â†’ Lightning
        - å•å¼ è‚¡ç¥¨å›¾ç‰‡ â†’ Turbo  
        - å¤šå¼ å›¾ç‰‡+å¤æ‚é—®é¢˜ â†’ Pro
        - å¤§é‡æ•°æ®+æ·±åº¦åˆ†æ â†’ Elite
        - ç ”ç©¶çº§åˆ«+åˆ›æ–°è¦æ±‚ â†’ Ultimate
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ChatCompletionRequest"
          multipart/form-data:
            schema:
              type: object
              properties:
                messages:
                  type: string
                  description: "JSONæ ¼å¼çš„æ¶ˆæ¯æ•°ç»„"
                files:
                  type: array
                  items:
                    type: string
                    format: binary
                performance_level:
                  type: string
                  enum: [lightning, turbo, pro, elite, ultimate, auto]
                  default: auto
      responses:
        "200":
          description: æˆåŠŸå“åº” - äº”å±‚ç»“æ„åŒ–åˆ†æç»“æœ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ChatCompletionResponse"
              examples:
                lightning_example:
                  summary: "Lightningæ¨¡å¼ - å¿«é€Ÿåˆ†æç¤ºä¾‹"
                  value:
                    id: "chatcmpl-lightning-123"
                    object: "chat.completion"
                    created: 1677652288
                    model: "o3-2025-04-16"
                    choices:
                      - index: 0
                        message:
                          role: "assistant"
                          content:
                            reasoning: "å¿«é€Ÿæ‰«æNVDAæŠ€æœ¯æŒ‡æ ‡ï¼šRSI=1.0è¶…ä¹°ï¼Œä½†åŠ¨é‡ä¾ç„¶å¼ºåŠ²ï¼ŒADX=43.97æ˜¾ç¤ºå¼ºè¶‹åŠ¿ã€‚"
                            analysis: "ğŸ“Š NVDAæŠ€æœ¯åˆ†ææ‘˜è¦ï¼šè¶…ä¹°ä½†è¶‹åŠ¿å¼ºåŠ²ï¼Œæˆäº¤é‡æ”¾å¤§éªŒè¯çªç ´ã€‚"
                            strategy: "ğŸ’¡ æ“ä½œå»ºè®®ï¼šè°¨æ…çœ‹å¤šï¼Œ158.70é™„è¿‘å°å¹…åŠ ä»“ï¼Œæ­¢æŸ154.00ã€‚"
                            risk_management: "âš ï¸ é£é™©æç¤ºï¼šçŸ­æœŸè¶…ä¹°ï¼Œæ³¨æ„æŠ€æœ¯æ€§è°ƒæ•´ã€‚"
                            final_answer: "å½“å‰æ¨¡å‹ï¼šOpenAI o3-2025-04-16\n\nâš¡ Lightningå¿«é€Ÿåˆ†æï¼šNVDAè¶…ä¹°ä½†è¶‹åŠ¿å¼ºåŠ²ï¼Œå»ºè®®158.70å°å¹…åŠ ä»“ï¼Œæ­¢æŸ154.00ã€‚æˆæœ¬ï¼š$0.03"
                        finish_reason: "stop"
                    usage:
                      prompt_tokens: 10000
                      completion_tokens: 4000
                      total_tokens: 14000
                      reasoning_tokens: 2000
                    metadata:
                      performance_level: "lightning"
                      estimated_cost: 0.03
                      analysis_duration: 3.2
                      tools_used: ["basic_technical", "simple_news", "risk_calculator"]
                ultimate_example:
                  summary: "Ultimateæ¨¡å¼ - æé™åˆ†æç¤ºä¾‹"
                  value:
                    id: "chatcmpl-ultimate-456"
                    object: "chat.completion"
                    created: 1677652288
                    model: "o3-2025-04-16"
                    choices:
                      - index: 0
                        message:
                          role: "assistant"
                          content:
                            reasoning: "å¯åŠ¨o3è¶…çº§æ¨ç†å¼•æ“...50kæ¨ç†ä»¤ç‰Œæ·±åº¦åˆ†æï¼šæ£€æµ‹åˆ°NVDAå¤šæ¨¡æ€è¾“å…¥ï¼Œæ¿€æ´»15å·¥å…·è¶…çº§å¹¶è¡Œã€‚æŠ€æœ¯é¢ï¼šRSIå¤šå‘¨æœŸå…±æŒ¯ï¼ŒADXå¼ºè¶‹åŠ¿ç¡®è®¤ï¼Œå¸ƒæ—å¸¦çªç ´éªŒè¯ã€‚åŸºæœ¬é¢ï¼šAIèŠ¯ç‰‡é¾™å¤´åœ°ä½ï¼ŒQ4ä¸šç»©è¶…é¢„æœŸã€‚èµ„é‡‘é¢ï¼šæœºæ„å¤§å¹…å¢æŒï¼ŒåŒ—å‘èµ„é‡‘å‡€æµå…¥ã€‚æ¶ˆæ¯é¢ï¼šåˆ©å¥½æ¶ˆæ¯äº•å–·ï¼Œåˆ†æå¸ˆé›†ä½“ä¸Šè°ƒç›®æ ‡ä»·ã€‚é£é™©é¢ï¼šçŸ­æœŸè¶…ä¹°ä½†å¯æ§ã€‚ç»¼åˆ50+ç»´åº¦åˆ†æï¼Œå¼ºçƒˆçœ‹å¥½ã€‚"
                            analysis: "ğŸ”¥ NVDAç»ˆæå…¨ç»´åº¦åˆ†æï¼šæŠ€æœ¯é¢å¤šæŒ‡æ ‡å…±æŒ¯çªç ´ï¼ŒåŸºæœ¬é¢AIé¾™å¤´åœ°ä½ç¨³å›ºï¼Œèµ„é‡‘é¢æœºæ„å¤§å¹…å¢æŒï¼Œæ¶ˆæ¯é¢åˆ©å¥½å¯†é›†ï¼Œé£é™©é¢çŸ­æœŸè¶…ä¹°å¯æ§ã€‚15å·¥å…·å¹¶è¡Œæ·±åº¦æ‰«æï¼Œ50+æŠ€æœ¯æŒ‡æ ‡ï¼Œ14ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œå…¨çƒå¸‚åœºå…³è”åˆ†æï¼Œå®æ—¶æ–°é—»æƒ…æ„Ÿè¿½è¸ªã€‚"
                            strategy: "ğŸ’¡ ç»ˆææ“ä½œç­–ç•¥çŸ©é˜µï¼šæ¿€è¿›å‹158.70åŠ ä»“20%ç›®æ ‡185-200ï¼Œç¨³å¥å‹å‡ä»“10%åˆ†æ‰¹å¸ƒå±€ï¼Œä¿å®ˆå‹å‡ä»“40%ç­‰å¾…å›è°ƒã€‚é‡åŒ–ç­–ç•¥ç½‘æ ¼äº¤æ˜“155-165ï¼ŒæœŸæƒç­–ç•¥ä¹°å…¥160Cæ æ†åšå¼ˆã€‚ç²¾ç¡®ç‚¹ä½ï¼šæ”¯æ’‘155.50/152.00ï¼Œé˜»åŠ›160.00/165.00/172.00ã€‚"
                            risk_management: "âš ï¸ è¶…çº§é£é™©ç®¡æ§ï¼šVaRæ—¥æŸå¤±4.2%ï¼Œå‹åŠ›æµ‹è¯•æç«¯å›æ’¤12%ï¼Œæ™ºèƒ½æ­¢æŸ154.00ï¼ŒåŠ¨æ€å¯¹å†²ç­–ç•¥ï¼Œå®æ—¶ç›‘æ§é¢„è­¦ï¼Œåº”æ€¥å“åº”é¢„æ¡ˆå››çº§é˜²æŠ¤ã€‚"
                            final_answer: "å½“å‰æ¨¡å‹ï¼šOpenAI o3-2025-04-16 ğŸ§ âœ¨\n\nğŸŒŸ Ultimateæé™åˆ†æï¼šNVDA A+å¼ºçƒˆæ¨èï¼ŒæŠ€æœ¯+åŸºæœ¬+èµ„é‡‘+æ¶ˆæ¯å››ç»´å…±æŒ¯çªç ´ã€‚æ¿€è¿›è€…158.70åŠ ä»“20%ç›®æ ‡200ï¼Œç¨³å¥è€…åˆ†æ‰¹å¸ƒå±€ï¼Œä¿å®ˆè€…é€‚åº¦å‡ä»“ã€‚æ­¢æŸ154.00ï¼Œ15å·¥å…·æ·±åº¦åˆ†æç½®ä¿¡åº¦94.2%ã€‚æˆæœ¬ï¼š$0.65"
                        finish_reason: "stop"
                    usage:
                      prompt_tokens: 50000
                      completion_tokens: 100000
                      total_tokens: 200000
                      reasoning_tokens: 50000
                    metadata:
                      performance_level: "ultimate"
                      estimated_cost: 0.65
                      analysis_duration: 45.8
                      tools_used: ["ultimate_stock_engine", "super_news_analyzer", "quantitative_predictor", "risk_manager", "strategy_optimizer", "market_monitor", "sentiment_analyzer", "option_analyzer", "macro_tracker", "correlation_engine", "pattern_recognizer", "backtest_engine", "visualization_generator", "report_generator", "decision_orchestrator"]
                      confidence_score: 0.942
                      reasoning_quality: 0.96
        "206":
          description: æµå¼å“åº” - å®æ—¶åˆ†æè¿‡ç¨‹å±•ç¤º
          content:
            text/event-stream:
              schema:
                $ref: "#/components/schemas/ChatCompletionStreamResponse"
        "400":
          description: è¯·æ±‚é”™è¯¯
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: è®¤è¯å¤±è´¥
        "429":
          description: è¯·æ±‚é¢‘ç‡é™åˆ¶
        "500":
          description: æœåŠ¡å™¨é”™è¯¯

components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: Authorization
      description: "Bearer YOUR_OPENAI_API_KEY"

  schemas:
    ChatCompletionRequest:
      type: object
      required: [model, messages]
      properties:
        model:
          type: string
          enum: [o3-2025-04-16]
          default: o3-2025-04-16
          description: "é”å®šo3-2025-04-16æ¨¡å‹"
        messages:
          type: array
          items:
            $ref: "#/components/schemas/Message"
          description: "å¯¹è¯æ¶ˆæ¯æ•°ç»„ï¼Œæ”¯æŒæ–‡æœ¬å’Œå›¾åƒ"
        performance_level:
          type: string
          enum: [lightning, turbo, pro, elite, ultimate, auto]
          default: auto
          description: |
            æ€§èƒ½çº§åˆ«é€‰æ‹©:
            - lightning: $0.03/æ¬¡ï¼Œå¿«é€ŸéªŒè¯
            - turbo: $0.10/æ¬¡ï¼Œæ ‡å‡†åˆ†æ  
            - pro: $0.22/æ¬¡ï¼Œæ·±åº¦åˆ†æ
            - elite: $0.41/æ¬¡ï¼Œæœºæ„çº§åˆ†æ
            - ultimate: $0.65/æ¬¡ï¼Œæé™åˆ†æ
            - auto: è‡ªåŠ¨æ£€æµ‹æ¨è
        auto_upgrade:
          type: boolean
          default: false
          description: "æ˜¯å¦å…è®¸è‡ªåŠ¨å‡çº§åˆ°æ›´é«˜çº§åˆ«"
        budget_limit:
          type: number
          minimum: 0.01
          maximum: 10.0
          description: "å•æ¬¡è°ƒç”¨é¢„ç®—ä¸Šé™(ç¾å…ƒ)"
        temperature:
          type: number
          minimum: 0
          maximum: 1.0
          description: "åˆ›æ–°æ§åˆ¶ï¼Œæ ¹æ®çº§åˆ«è‡ªåŠ¨è°ƒæ•´"
        top_p:
          type: number
          minimum: 0.1
          maximum: 0.95
          description: "é‡‡æ ·ç­–ç•¥ï¼Œæ ¹æ®çº§åˆ«è‡ªåŠ¨è°ƒæ•´"
        max_tokens:
          type: integer
          minimum: 1
          maximum: 100000
          description: "æœ€å¤§è¾“å‡ºä»¤ç‰Œï¼Œæ ¹æ®çº§åˆ«è‡ªåŠ¨è®¾ç½®"
        max_reasoning_tokens:
          type: integer
          minimum: 0
          maximum: 50000
          description: "æœ€å¤§æ¨ç†ä»¤ç‰Œï¼Œæ ¹æ®çº§åˆ«è‡ªåŠ¨è®¾ç½®"
        stream:
          type: boolean
          default: false
          description: "æ˜¯å¦å¯ç”¨æµå¼è¾“å‡º"
        tools:
          type: array
          items:
            $ref: "#/components/schemas/Tool"
          description: "å·¥å…·é…ç½®ï¼Œæ ¹æ®çº§åˆ«è‡ªåŠ¨é€‰æ‹©"
        tool_choice:
          oneOf:
            - type: string
              enum: [none, auto, required]
            - $ref: "#/components/schemas/ToolChoice"
          default: auto
          description: "å·¥å…·é€‰æ‹©ç­–ç•¥"

    Message:
      type: object
      required: [role, content]
      properties:
        role:
          type: string
          enum: [system, user, assistant, tool]
          description: "æ¶ˆæ¯è§’è‰²"
        content:
          oneOf:
            - type: string
            - type: array
              items:
                $ref: "#/components/schemas/ContentPart"
          description: "æ¶ˆæ¯å†…å®¹ï¼Œæ”¯æŒæ–‡æœ¬å’Œå¤šæ¨¡æ€"
        name:
          type: string
          description: "æ¶ˆæ¯å‘é€è€…åç§°"
        tool_calls:
          type: array
          items:
            $ref: "#/components/schemas/ToolCall"
          description: "å·¥å…·è°ƒç”¨"
        tool_call_id:
          type: string
          description: "å·¥å…·è°ƒç”¨ID"

    ContentPart:
      type: object
      required: [type]
      properties:
        type:
          type: string
          enum: [text, image_url]
        text:
          type: string
          description: "æ–‡æœ¬å†…å®¹"
        image_url:
          type: object
          properties:
            url:
              type: string
              description: "å›¾åƒURLæˆ–base64æ•°æ®"
            detail:
              type: string
              enum: [low, high, auto]
              default: auto
              description: "å›¾åƒåˆ†æç²¾åº¦"

    Tool:
      type: object
      required: [type, function]
      properties:
        type:
          type: string
          enum: [function]
        function:
          $ref: "#/components/schemas/FunctionDefinition"

    FunctionDefinition:
      type: object
      required: [name, description]
      properties:
        name:
          type: string
          description: "å‡½æ•°åç§°"
        description:
          type: string
          description: "å‡½æ•°æè¿°"
        parameters:
          type: object
          description: "å‡½æ•°å‚æ•°schema"

    ToolChoice:
      type: object
      required: [type, function]
      properties:
        type:
          type: string
          enum: [function]
        function:
          type: object
          required: [name]
          properties:
            name:
              type: string

    ToolCall:
      type: object
      required: [id, type, function]
      properties:
        id:
          type: string
        type:
          type: string
          enum: [function]
        function:
          type: object
          required: [name, arguments]
          properties:
            name:
              type: string
            arguments:
              type: string

    ChatCompletionResponse:
      type: object
      required: [id, object, created, model, choices]
      properties:
        id:
          type: string
          description: "å“åº”å”¯ä¸€æ ‡è¯†"
        object:
          type: string
          enum: [chat.completion]
        created:
          type: integer
          description: "åˆ›å»ºæ—¶é—´æˆ³"
        model:
          type: string
          enum: [o3-2025-04-16]
        choices:
          type: array
          items:
            $ref: "#/components/schemas/Choice"
        usage:
          $ref: "#/components/schemas/Usage"
        metadata:
          $ref: "#/components/schemas/ResponseMetadata"

    Choice:
      type: object
      required: [index, message, finish_reason]
      properties:
        index:
          type: integer
        message:
          type: object
          required: [role, content]
          properties:
            role:
              type: string
              enum: [assistant]
            content:
              type: object
              required: [reasoning, analysis, strategy, risk_management, final_answer]
              description: "äº”å±‚ç»“æ„åŒ–å“åº”"
              properties:
                reasoning:
                  type: string
                  description: "æ¨ç†å±‚ï¼šæ·±åº¦æ€è€ƒè¿‡ç¨‹(ä»…é«˜çº§åˆ«)"
                analysis:
                  type: string
                  description: "åˆ†æå±‚ï¼šæŠ€æœ¯+åŸºæœ¬é¢è¯¦ç»†åˆ†æ"
                strategy:
                  type: string
                  description: "ç­–ç•¥å±‚ï¼šå…·ä½“æ“ä½œå»ºè®®å’Œç­–ç•¥"
                risk_management:
                  type: string
                  description: "é£æ§å±‚ï¼šé£é™©è¯„ä¼°å’Œç®¡ç†æ–¹æ¡ˆ"
                final_answer:
                  type: string
                  description: "ç”¨æˆ·å±‚ï¼šç®€æ´æ˜ç¡®çš„æœ€ç»ˆç»“è®º"
            tool_calls:
              type: array
              items:
                $ref: "#/components/schemas/ToolCall"
        finish_reason:
          type: string
          enum: [stop, length, tool_calls, content_filter]

    ChatCompletionStreamResponse:
      type: object
      required: [id, object, created, model, choices]
      properties:
        id:
          type: string
        object:
          type: string
          enum: [chat.completion.chunk]
        created:
          type: integer
        model:
          type: string
          enum: [o3-2025-04-16]
        choices:
          type: array
          items:
            type: object
            required: [index, delta]
            properties:
              index:
                type: integer
              delta:
                type: object
                properties:
                  role:
                    type: string
                    enum: [assistant]
                  content:
                    type: object
                    properties:
                      reasoning:
                        type: string
                      analysis:
                        type: string
                      strategy:
                        type: string
                      risk_management:
                        type: string
                      final_answer:
                        type: string
                  tool_calls:
                    type: array
                    items:
                      $ref: "#/components/schemas/ToolCall"
              finish_reason:
                type: string
                enum: [stop, length, tool_calls, content_filter]

    Usage:
      type: object
      required: [prompt_tokens, completion_tokens, total_tokens]
      properties:
        prompt_tokens:
          type: integer
          description: "è¾“å…¥ä»¤ç‰Œæ•°"
        completion_tokens:
          type: integer
          description: "è¾“å‡ºä»¤ç‰Œæ•°"
        total_tokens:
          type: integer
          description: "æ€»ä»¤ç‰Œæ•°"
        reasoning_tokens:
          type: integer
          description: "æ¨ç†ä»¤ç‰Œæ•°(o3ç‰¹æœ‰)"

    ResponseMetadata:
      type: object
      properties:
        performance_level:
          type: string
          enum: [lightning, turbo, pro, elite, ultimate]
          description: "å®é™…ä½¿ç”¨çš„æ€§èƒ½çº§åˆ«"
        estimated_cost:
          type: number
          description: "é¢„ä¼°æˆæœ¬(ç¾å…ƒ)"
        analysis_duration:
          type: number
          description: "åˆ†æè€—æ—¶(ç§’)"
        tools_used:
          type: array
          items:
            type: string
          description: "ä½¿ç”¨çš„å·¥å…·åˆ—è¡¨"
        confidence_score:
          type: number
          minimum: 0
          maximum: 1
          description: "åˆ†æç½®ä¿¡åº¦"
        reasoning_quality:
          type: number
          minimum: 0
          maximum: 1
          description: "æ¨ç†è´¨é‡è¯„åˆ†"
        auto_upgrade_triggered:
          type: boolean
          description: "æ˜¯å¦è§¦å‘äº†è‡ªåŠ¨å‡çº§"
        budget_exceeded:
          type: boolean
          description: "æ˜¯å¦è¶…å‡ºé¢„ç®—é™åˆ¶"

    ErrorResponse:
      type: object
      required: [error]
      properties:
        error:
          type: object
          required: [message, type]
          properties:
            message:
              type: string
              description: "é”™è¯¯è¯¦ç»†ä¿¡æ¯"
            type:
              type: string
              enum: [invalid_request_error, api_error, permission_error, rate_limit_error, server_error]
              description: "é”™è¯¯ç±»å‹"
            code:
              type: string
              description: "é”™è¯¯ä»£ç "
            param:
              type: string
              description: "å¼•èµ·é”™è¯¯çš„å‚æ•°å"
      examples:
        budget_exceeded:
          summary: "é¢„ç®—è¶…é™é”™è¯¯"
          value:
            error:
              message: "Request would exceed budget limit of $0.50. Estimated cost: $0.65. Please increase budget_limit or choose a lower performance level."
              type: "invalid_request_error"
              code: "budget_exceeded"
              param: "performance_level"
        invalid_level:
          summary: "æ— æ•ˆæ€§èƒ½çº§åˆ«"
          value:
            error:
              message: "Invalid performance_level 'super_ultimate'. Valid options: lightning, turbo, pro, elite, ultimate, auto"
              type: "invalid_request_error"
              code: "invalid_parameter_value"
              param: "performance_level"
        rate_limit:
          summary: "é¢‘ç‡é™åˆ¶"
          value:
            error:
              message: "Rate limit exceeded. Please wait 60 seconds before making another request."
              type: "rate_limit_error"
              code: "rate_limit_exceeded"

  parameters:
    PerformanceLevel:
      name: performance_level
      in: query
      required: false
      schema:
        type: string
        enum: [lightning, turbo, pro, elite, ultimate, auto]
        default: auto
      description: "æ€§èƒ½çº§åˆ«é€‰æ‹©"
      examples:
        auto:
          summary: "è‡ªåŠ¨æ£€æµ‹"
          value: "auto"
        lightning:
          summary: "é—ªç”µæ¨¡å¼"
          value: "lightning"
        ultimate:
          summary: "ç»ˆææ¨¡å¼"
          value: "ultimate"

    BudgetLimit:
      name: budget_limit
      in: query
      required: false
      schema:
        type: number
        minimum: 0.01
        maximum: 10.0
      description: "å•æ¬¡è°ƒç”¨é¢„ç®—ä¸Šé™(ç¾å…ƒ)"
      examples:
        conservative:
          summary: "ä¿å®ˆé¢„ç®—"
          value: 0.25
        moderate:
          summary: "é€‚ä¸­é¢„ç®—"
          value: 0.50
        generous:
          summary: "å……è¶³é¢„ç®—"
          value: 1.00

  examples:
    StockAnalysisMultiModal:
      summary: "å¤šæ¨¡æ€è‚¡ç¥¨åˆ†æç¤ºä¾‹"
      description: "åŒ…å«å›¾ç‰‡å’Œæ–‡æœ¬çš„ç»¼åˆè‚¡ç¥¨åˆ†æè¯·æ±‚"
      value:
        model: "o3-2025-04-16"
        messages:
          - role: "user"
            content:
              - type: "text"
                text: "è¯·åˆ†æè¿™å¼ NVDAè‚¡ç¥¨å›¾è¡¨ï¼Œç»™å‡ºæŠ€æœ¯åˆ†æå’Œæ“ä½œå»ºè®®"
              - type: "image_url"
                image_url:
                  url: "data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg=="
                  detail: "high"
        performance_level: "auto"
        auto_upgrade: true
        budget_limit: 0.50
        stream: false
        temperature: 0.7
        max_tokens: 50000
        max_reasoning_tokens: 20000

    QuickAnalysis:
      summary: "å¿«é€Ÿåˆ†æç¤ºä¾‹"
      description: "Lightningçº§åˆ«çš„å¿«é€Ÿè‚¡ç¥¨æŸ¥è¯¢"
      value:
        model: "o3-2025-04-16"
        messages:
          - role: "user"
            content: "NVDAç°åœ¨å¯ä»¥ä¹°å…¥å—ï¼Ÿ"
        performance_level: "lightning"
        budget_limit: 0.05

    DeepResearch:
      summary: "æ·±åº¦ç ”ç©¶ç¤ºä¾‹"
      description: "Ultimateçº§åˆ«çš„æ·±åº¦ç ”ç©¶åˆ†æ"
      value:
        model: "o3-2025-04-16"
        messages:
          - role: "user"
            content:
              - type: "text"
                text: "è¯·å¯¹NVDAè¿›è¡Œæœºæ„çº§æ·±åº¦ç ”ç©¶åˆ†æï¼ŒåŒ…æ‹¬æŠ€æœ¯é¢ã€åŸºæœ¬é¢ã€èµ„é‡‘é¢ã€æ¶ˆæ¯é¢çš„å…¨ç»´åº¦è¯„ä¼°ï¼Œå¹¶ç”Ÿæˆè¯¦ç»†çš„æŠ•èµ„ç ”ç©¶æŠ¥å‘Š"
              - type: "image_url"
                image_url:
                  url: "data:image/jpeg;base64,..."
                  detail: "high"
        performance_level: "ultimate"
        auto_upgrade: false
        budget_limit: 1.00
        stream: true
        temperature: 0.8
        max_tokens: 100000
        max_reasoning_tokens: 50000

  headers:
    X-RateLimit-Limit:
      description: "æ¯åˆ†é’Ÿè¯·æ±‚é™åˆ¶"
      schema:
        type: integer
        example: 60
    X-RateLimit-Remaining:
      description: "å‰©ä½™è¯·æ±‚æ¬¡æ•°"
      schema:
        type: integer
        example: 45
    X-RateLimit-Reset:
      description: "é™åˆ¶é‡ç½®æ—¶é—´æˆ³"
      schema:
        type: integer
        example: 1677652288
    X-Request-ID:
      description: "è¯·æ±‚å”¯ä¸€æ ‡è¯†"
      schema:
        type: string
        example: "req-12345678-abcd-1234-efgh-567890123456"

  requestBodies:
    ChatCompletionRequest:
      description: "èŠå¤©å®Œæˆè¯·æ±‚ä½“"
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ChatCompletionRequest"
          examples:
            lightning_analysis:
              $ref: "#/components/examples/QuickAnalysis"
            multimodal_analysis:
              $ref: "#/components/examples/StockAnalysisMultiModal"
            deep_research:
              $ref: "#/components/examples/DeepResearch"
        multipart/form-data:
          schema:
            type: object
            properties:
              messages:
                type: string
                description: "JSONæ ¼å¼çš„æ¶ˆæ¯æ•°ç»„"
              files:
                type: array
                items:
                  type: string
                  format: binary
                description: "ä¸Šä¼ çš„å›¾ç‰‡æ–‡ä»¶"
              performance_level:
                type: string
                enum: [lightning, turbo, pro, elite, ultimate, auto]
                default: auto
              budget_limit:
                type: number
                minimum: 0.01
                maximum: 10.0

  responses:
    SuccessResponse:
      description: "æˆåŠŸå“åº”"
      headers:
        X-Request-ID:
          $ref: "#/components/headers/X-Request-ID"
        X-RateLimit-Limit:
          $ref: "#/components/headers/X-RateLimit-Limit"
        X-RateLimit-Remaining:
          $ref: "#/components/headers/X-RateLimit-Remaining"
        X-RateLimit-Reset:
          $ref: "#/components/headers/X-RateLimit-Reset"
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ChatCompletionResponse"

    StreamResponse:
      description: "æµå¼å“åº”"
      headers:
        X-Request-ID:
          $ref: "#/components/headers/X-Request-ID"
      content:
        text/event-stream:
          schema:
            $ref: "#/components/schemas/ChatCompletionStreamResponse"

    ErrorResponse:
      description: "é”™è¯¯å“åº”"
      headers:
        X-Request-ID:
          $ref: "#/components/headers/X-Request-ID"
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"

tags:
  - name: "è‚¡ç¥¨åˆ†æ"
    description: "è‚¡ç¥¨æŠ€æœ¯åˆ†æå’ŒæŠ•èµ„å»ºè®®"
    externalDocs:
      description: "è¯¦ç»†ä½¿ç”¨è¯´æ˜"
      url: "https://aiylt.github.io/.well-known/instructions.md"
  - name: "å¤šæ¨¡æ€åˆ†æ"
    description: "æ”¯æŒå›¾åƒã€æ–‡æœ¬ç­‰å¤šç§è¾“å…¥æ¨¡å¼"
  - name: "åˆ†çº§é…ç½®"
    description: "äº”ä¸ªæ€§èƒ½çº§åˆ«çš„çµæ´»é…ç½®"
  - name: "æˆæœ¬æ§åˆ¶"
    description: "é€æ˜çš„æˆæœ¬è®¡ç®—å’Œé¢„ç®—æ§åˆ¶"

externalDocs:
  description: "å®Œæ•´çš„APIä½¿ç”¨æŒ‡å—å’Œæœ€ä½³å®è·µ"
  url: "https://aiylt.github.io/.well-known/instructions.md"

# Performance Level Configuration Matrix
x-performance-levels:
  lightning:
    cost_per_call: 0.03
    monthly_cost_50_calls: 1.50
    tokens: { input: 10000, output: 4000, reasoning: 2000, total: 14000 }
    tools: 3
    duration: "3-8s"
    use_cases: ["å¿«é€ŸéªŒè¯", "ç®€å•æŸ¥è¯¢", "å®æ—¶ç›‘æ§"]
    recommended_for: ["ä¸ªäººæŠ•èµ„è€…æ—¥å¸¸ç›‘æ§"]
  turbo:
    cost_per_call: 0.10
    monthly_cost_50_calls: 5.00
    tokens: { input: 20000, output: 15000, reasoning: 5000, total: 40000 }
    tools: 6
    duration: "8-15s"
    use_cases: ["æ ‡å‡†åˆ†æ", "æ—¥å¸¸äº¤æ˜“", "æŠ€æœ¯åˆ†æ"]
    recommended_for: ["ä¸ªäººæŠ•èµ„è€…ä¹°å–å†³ç­–"]
  pro:
    cost_per_call: 0.22
    monthly_cost_50_calls: 11.00
    tokens: { input: 35000, output: 35000, reasoning: 12000, total: 82000 }
    tools: 10
    duration: "15-25s"
    use_cases: ["æ·±åº¦åˆ†æ", "ç­–ç•¥åˆ¶å®š", "ç»„åˆç®¡ç†"]
    recommended_for: ["ä¸“ä¸šäº¤æ˜“å‘˜æ ‡å‡†åˆ†æ", "ä¸ªäººæŠ•èµ„è€…é‡è¦æ“ä½œ"]
  elite:
    cost_per_call: 0.41
    monthly_cost_50_calls: 20.50
    tokens: { input: 50000, output: 65000, reasoning: 25000, total: 140000 }
    tools: 13
    duration: "25-40s"
    use_cases: ["æœºæ„çº§åˆ†æ", "é‡å¤§å†³ç­–", "é£é™©å»ºæ¨¡"]
    recommended_for: ["ä¸“ä¸šäº¤æ˜“å‘˜é‡å¤§å†³ç­–", "æœºæ„ç”¨æˆ·å¸¸è§„åˆ†æ"]
  ultimate:
    cost_per_call: 0.65
    monthly_cost_50_calls: 32.50
    tokens: { input: 50000, output: 100000, reasoning: 50000, total: 200000 }
    tools: 15
    duration: "40-60s"
    use_cases: ["æé™åˆ†æ", "ç ”ç©¶æŠ¥å‘Š", "AIæ¢ç´¢"]
    recommended_for: ["æœºæ„ç”¨æˆ·æˆ˜ç•¥å†³ç­–", "ç ”ç©¶åˆ›æ–°"]

# Auto-Detection Rules
x-auto-detection:
  rules:
    - condition: "å•ä¸€æ–‡æœ¬æŸ¥è¯¢ < 50å­—ç¬¦"
      recommendation: "lightning"
      reasoning: "ç®€å•å¿«é€ŸæŸ¥è¯¢"
    - condition: "å•å¼ å›¾ç‰‡ + åŸºç¡€é—®é¢˜"
      recommendation: "turbo"
      reasoning: "æ ‡å‡†å›¾è¡¨åˆ†æ"
    - condition: "å¤šå¼ å›¾ç‰‡ OR å¤æ‚æ–‡æœ¬æŸ¥è¯¢"
      recommendation: "pro"
      reasoning: "æ·±åº¦å¯¹æ¯”åˆ†æ"
    - condition: "å¤§é‡æ•°æ® OR æœºæ„çº§éœ€æ±‚"
      recommendation: "elite"
      reasoning: "ä¸“ä¸šçº§åˆ«åˆ†æ"
    - condition: "ç ”ç©¶æŠ¥å‘Š OR åˆ›æ–°è¦æ±‚"
      recommendation: "ultimate"
      reasoning: "æé™æ€§èƒ½éœ€æ±‚"

# Cost Calculation Examples
x-cost-examples:
  lightning_breakdown:
    input_tokens: { count: 10000, cost_per_1M: 1.00, subtotal: 0.01 }
    output_tokens: { count: 4000, cost_per_1M: 4.00, subtotal: 0.016 }
    reasoning_tokens: { count: 2000, cost_per_1M: 4.00, subtotal: 0.008 }
    total_cost: 0.034
    rounded_cost: 0.03
  ultimate_breakdown:
    input_tokens: { count: 50000, cost_per_1M: 1.00, subtotal: 0.05 }
    output_tokens: { count: 100000, cost_per_1M: 4.00, subtotal: 0.40 }
    reasoning_tokens: { count: 50000, cost_per_1M: 4.00, subtotal: 0.20 }
    total_cost: 0.65
    rounded_cost: 0.65

# END OF OPENAPI.YAML - æ–‡ä»¶ç»“æ„å·²å®Œæ•´é—­åˆï¼Œå¦‚éœ€æ‰©å±•è¯·åœ¨æ­¤å¤„ç»§ç»­ã€‚