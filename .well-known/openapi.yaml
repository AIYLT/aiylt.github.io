openapi: 3.1.0
info:
  title: Institutional Day Trading AI - o3-2025-04-16
  version: 2.0.0
  description: |
    **ğŸ“ˆ æœºæ„çº§æ—¥å†…äº¤æ˜“ AI ç³»ç»Ÿ - åŸºäº OpenAI o3-2025-04-16**
    
    ä¸“ä¸ºé«˜é¢‘è‚¡ç¥¨äº¤æ˜“ã€å®æ—¶å¸‚åœºåˆ†æå’Œé£é™©ç®¡ç†è®¾è®¡çš„ AI äº¤æ˜“åŠ©æ‰‹ã€‚
    
    **ğŸ¯ äº¤æ˜“èƒ½åŠ›**:
    - å®æ—¶è‚¡ç¥¨ä»·æ ¼åˆ†æä¸é¢„æµ‹
    - æŠ€æœ¯æŒ‡æ ‡è®¡ç®—ä¸è§£è¯»
    - é£é™©è¯„ä¼°ä¸ä»“ä½ç®¡ç†
    - å¸‚åœºæƒ…ç»ªåˆ†æ
    - é«˜é¢‘äº¤æ˜“ç­–ç•¥ç”Ÿæˆ
    - å®æ—¶æ–°é—»å½±å“åˆ†æ
    
    **ğŸ”§ æ¨¡å‹é…ç½®**:
    - Context Window: 200,000 tokens
    - Max Output: 100,000 tokens
    - Reasoning: HIGH (æœ€é«˜æ¨ç†ç²¾åº¦)
    - Temperature: 0.1 (ä½éšæœºæ€§ï¼Œé«˜ç²¾ç¡®åº¦)
    - Response Time: ä¼˜åŒ–ä¸ºä½å»¶è¿Ÿ
    - BYOK Required: æœºæ„çº§è®¿é—®æƒé™
    
    **âš¡ï¸ äº¤æ˜“ä¼˜åŒ–**:
    - ç¡®å®šæ€§å†³ç­–è¾“å‡º
    - ç»“æ„åŒ–äº¤æ˜“ä¿¡å·
    - å®æ—¶é£é™©æ§åˆ¶
    - å¤šèµ„äº§ç»„åˆåˆ†æ

servers:
  - url: https://api.openai.com/v1
    description: OpenAI Official API (Primary)
  - url: https://openrouter.ai/api/v1
    description: OpenRouter API (Backup with BYOK)

paths:
  /chat/completions:
    post:
      operationId: createTradingAnalysis
      summary: ğŸš€ æœºæ„çº§è‚¡ç¥¨äº¤æ˜“åˆ†æä¸å†³ç­–
      description: |
        ä¸“ä¸ºæ—¥å†…äº¤æ˜“ä¼˜åŒ–çš„ o3-2025-04-16 æ¨¡å‹è°ƒç”¨æ¥å£ã€‚
        
        **ğŸ¯ äº¤æ˜“ç‰¹æ€§**:
        - è¶…ä½å»¶è¿Ÿå“åº”ï¼ˆæ¨ç†ä¼˜åŒ–ï¼‰
        - ç¡®å®šæ€§äº¤æ˜“å†³ç­–
        - ç»“æ„åŒ–è¾“å‡ºæ ¼å¼
        - å®æ—¶é£é™©è¯„ä¼°
        - å¤šç»´åº¦å¸‚åœºåˆ†æ
        
        **ğŸ“Š æ”¯æŒåˆ†æç±»å‹**:
        - æŠ€æœ¯é¢åˆ†æ (TA)
        - åŸºæœ¬é¢åˆ†æ (FA) 
        - é‡åŒ–åˆ†æ (QA)
        - æƒ…ç»ªåˆ†æ (SA)
        - é£é™©ç®¡ç† (RM)
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TradingAnalysisRequest"
      responses:
        "200":
          description: äº¤æ˜“åˆ†ææˆåŠŸ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TradingAnalysisResponse"
        "206":
          description: æµå¼äº¤æ˜“åˆ†æ
          content:
            text/event-stream:
              schema:
                type: string
                description: å®æ—¶äº¤æ˜“ä¿¡å·æµ

components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: Authorization
      description: Bearer YOUR_INSTITUTIONAL_API_KEY

  schemas:
    TradingAnalysisRequest:
      type: object
      required:
        - model
        - messages
      properties:
        model:
          type: string
          enum:
            - o3-2025-04-16
            - openai/o3-2025-04-16
          default: o3-2025-04-16
          description: ğŸ¯ å¼ºåˆ¶ä½¿ç”¨ o3-2025-04-16 äº¤æ˜“åˆ†ææ¨¡å‹
        
        messages:
          type: array
          items:
            $ref: "#/components/schemas/TradingMessage"
          description: äº¤æ˜“åˆ†æå¯¹è¯æ•°ç»„
          minItems: 1
        
        # ğŸ”¥ äº¤æ˜“ä¼˜åŒ–å‚æ•°
        reasoning_effort:
          type: string
          enum:
            - high
          default: high
          description: |
            ğŸ§  äº¤æ˜“æ¨ç†ç­‰çº§ (å¼ºåˆ¶ HIGH):
            - high: æœ€å¤§æ¨ç†æ·±åº¦ï¼Œç¡®ä¿äº¤æ˜“å†³ç­–å‡†ç¡®æ€§
        
        temperature:
          type: number
          minimum: 0
          maximum: 0.2
          default: 0.1
          description: ğŸ¯ æä½æ¸©åº¦ç¡®ä¿äº¤æ˜“å†³ç­–ç¡®å®šæ€§å’Œå¯é‡å¤æ€§
        
        top_p:
          type: number
          minimum: 0.8
          maximum: 0.95
          default: 0.9
          description: ğŸª æ ¸é‡‡æ ·æ§åˆ¶ï¼Œå¹³è¡¡ç²¾ç¡®æ€§ä¸é€‚åº¦çµæ´»æ€§
        
        max_tokens:
          type: integer
          minimum: 500
          maximum: 8000
          default: 4000
          description: ğŸ“Š äº¤æ˜“åˆ†ææŠ¥å‘Šé•¿åº¦æ§åˆ¶
        
        max_completion_tokens:
          type: integer
          minimum: 500
          maximum: 10000
          default: 5000
          description: ğŸ§® åŒ…å«æ¨ç†tokençš„å®Œæ•´åˆ†æé•¿åº¦
        
        n:
          type: integer
          minimum: 1
          maximum: 1
          default: 1
          description: âš¡ï¸ å•ä¸€ç¡®å®šæ€§è¾“å‡ºï¼ˆäº¤æ˜“å†³ç­–ä¸å…è®¸å¤šé€‰æ‹©ï¼‰
        
        stream:
          type: boolean
          default: true
          description: ğŸ“¡ é»˜è®¤å¯ç”¨æµå¼è¾“å‡ºä»¥è·å¾—å®æ—¶äº¤æ˜“ä¿¡å·
        
        stop:
          type: array
          items:
            type: string
          default: ["TRADE_END", "ANALYSIS_COMPLETE", "RISK_ALERT"]
          maxItems: 4
          description: ğŸ›‘ äº¤æ˜“åˆ†æåœæ­¢ä¿¡å·
        
        presence_penalty:
          type: number
          minimum: 0
          maximum: 0.3
          default: 0.1
          description: ğŸ“ˆ è½»å¾®é¼“åŠ±å¤šç»´åº¦åˆ†æ
        
        frequency_penalty:
          type: number
          minimum: 0
          maximum: 0.5
          default: 0.2
          description: ğŸ”„ é¿å…é‡å¤åˆ†ææ¨¡å¼
        
        logit_bias:
          type: object
          additionalProperties:
            type: number
            minimum: -50
            maximum: 50
          description: ğŸ“Š äº¤æ˜“æœ¯è¯­åç½®è®¾ç½®
          example:
            "buy": 5
            "sell": 5
            "hold": 5
            "risk": 10
        
        seed:
          type: integer
          description: ğŸŒ± ç¡®ä¿ç›¸åŒå¸‚åœºæ¡ä»¶ä¸‹å†³ç­–å¯é‡ç°
        
        # ğŸ› ï¸ äº¤æ˜“å·¥å…·é…ç½®
        tools:
          type: array
          items:
            $ref: "#/components/schemas/TradingTool"
          maxItems: 20
          description: ğŸ“Š äº¤æ˜“åˆ†æå·¥å…·é›†åˆ
        
        tool_choice:
          type: string
          enum:
            - auto
            - required
          default: auto
          description: ğŸ¤– è‡ªåŠ¨é€‰æ‹©æœ€ä½³äº¤æ˜“åˆ†æå·¥å…·
        
        parallel_tool_calls:
          type: boolean
          default: true
          description: âš¡ï¸ å¹¶è¡Œæ‰§è¡Œå¤šä¸ªäº¤æ˜“åˆ†æå·¥å…·
        
        # ğŸ“‹ ç»“æ„åŒ–äº¤æ˜“è¾“å‡º
        response_format:
          oneOf:
            - $ref: "#/components/schemas/TradingJsonSchema"
            - $ref: "#/components/schemas/ResponseFormatJsonObject"
          default:
            type: json_schema
            json_schema:
              name: trading_analysis
              strict: true
          description: ğŸ“Š å¼ºåˆ¶ç»“æ„åŒ–äº¤æ˜“åˆ†æè¾“å‡º
        
        # ğŸ‘¤ äº¤æ˜“å‘˜æ ‡è¯†
        user:
          type: string
          pattern: "^trader_[a-zA-Z0-9_]{1,32}$"
          description: ğŸ‘¤ äº¤æ˜“å‘˜å”¯ä¸€æ ‡è¯†ç¬¦

    TradingMessage:
      type: object
      required:
        - role
      properties:
        role:
          type: string
          enum:
            - system
            - user
            - assistant
            - tool
          description: ğŸ’¬ æ¶ˆæ¯è§’è‰²
        
        content:
          oneOf:
            - type: string
            - type: array
              items:
                $ref: "#/components/schemas/TradingContentPart"
          description: ğŸ“Š äº¤æ˜“ä¿¡æ¯å†…å®¹
        
        name:
          type: string
          pattern: "^[a-zA-Z0-9_-]{1,64}$"
          description: ğŸ·ï¸ äº¤æ˜“å‘˜æˆ–ç³»ç»Ÿåç§°
        
        tool_calls:
          type: array
          items:
            $ref: "#/components/schemas/TradingToolCall"
          description: ğŸ”§ äº¤æ˜“å·¥å…·è°ƒç”¨è®°å½•

    TradingContentPart:
      oneOf:
        - $ref: "#/components/schemas/TextContentPart"
        - $ref: "#/components/schemas/ChartContentPart"

    TextContentPart:
      type: object
      required:
        - type
        - text
      properties:
        type:
          type: string
          enum:
            - text
        text:
          type: string
          description: ğŸ“ äº¤æ˜“åˆ†ææ–‡æœ¬

    ChartContentPart:
      type: object
      required:
        - type
        - image_url
      properties:
        type:
          type: string
          enum:
            - image_url
        image_url:
          type: object
          required:
            - url
          properties:
            url:
              type: string
              format: uri
              description: ğŸ“ˆ è‚¡ç¥¨å›¾è¡¨æˆ–æŠ€æœ¯åˆ†æå›¾åƒURL
            detail:
              type: string
              enum:
                - high
              default: high
              description: ğŸ” å¼ºåˆ¶é«˜ç²¾åº¦å›¾è¡¨åˆ†æ

    TradingTool:
      type: object
      required:
        - type
        - function
      properties:
        type:
          type: string
          enum:
            - function
        function:
          $ref: "#/components/schemas/TradingFunction"

    TradingFunction:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          enum:
            - technical_analysis
            - risk_assessment
            - market_sentiment
            - price_prediction
            - portfolio_optimization
            - news_impact_analysis
          description: ğŸ“Š é¢„å®šä¹‰äº¤æ˜“åˆ†æå‡½æ•°
        description:
          type: string
          description: ğŸ“‹ å‡½æ•°åŠŸèƒ½æè¿°
        parameters:
          type: object
          description: ğŸ”§ JSON Schema æ ¼å¼çš„å‚æ•°å®šä¹‰
        strict:
          type: boolean
          default: true
          description: ğŸ¯ äº¤æ˜“åˆ†æå¯ç”¨ä¸¥æ ¼æ¨¡å¼

    TradingToolCall:
      type: object
      required:
        - id
        - type
        - function
      properties:
        id:
          type: string
          description: ğŸ†” å·¥å…·è°ƒç”¨å”¯ä¸€ID
        type:
          type: string
          enum:
            - function
        function:
          type: object
          required:
            - name
            - arguments
          properties:
            name:
              type: string
              description: ğŸ“Š è°ƒç”¨çš„äº¤æ˜“å‡½æ•°å
            arguments:
              type: string
              description: ğŸ”§ JSONæ ¼å¼çš„å‡½æ•°å‚æ•°

    TradingJsonSchema:
      type: object
      required:
        - type
        - json_schema
      properties:
        type:
          type: string
          enum:
            - json_schema
        json_schema:
          type: object
          required:
            - name
            - schema
          properties:
            name:
              type: string
              enum:
                - trading_analysis
                - risk_report
                - trading_signal
              description: ğŸ“Š äº¤æ˜“åˆ†æç±»å‹
            strict:
              type: boolean
              default: true
              description: ğŸ¯ ä¸¥æ ¼æ¨¡å¼ç¡®ä¿è¾“å‡ºæ ¼å¼ä¸€è‡´æ€§
            schema:
              type: object
              description: ğŸ“‹ äº¤æ˜“åˆ†æç»“æ„å®šä¹‰
              example:
                type: object
                properties:
                  analysis_type:
                    type: string
                    enum: ["BUY", "SELL", "HOLD"]
                  confidence_score:
                    type: number
                    minimum: 0
                    maximum: 100
                  risk_level:
                    type: string
                    enum: ["LOW", "MEDIUM", "HIGH"]
                  price_target:
                    type: number
                  stop_loss:
                    type: number
                  reasoning:
                    type: string

    ResponseFormatJsonObject:
      type: object
      required:
        - type
      properties:
        type:
          type: string
          enum:
            - json_object

    TradingAnalysisResponse:
      type: object
      required:
        - id
        - object
        - created
        - model
        - choices
        - usage
      properties:
        id:
          type: string
          description: ğŸ†” äº¤æ˜“åˆ†æå“åº”ID
        object:
          type: string
          enum:
            - chat.completion
        created:
          type: integer
          description: â° åˆ†æç”Ÿæˆæ—¶é—´æˆ³
        model:
          type: string
          enum:
            - o3-2025-04-16
          description: ğŸ¯ ç¡®è®¤ä½¿ç”¨çš„äº¤æ˜“åˆ†ææ¨¡å‹
        choices:
          type: array
          items:
            $ref: "#/components/schemas/TradingChoice"
          description: ğŸ“Š äº¤æ˜“åˆ†æç»“æœ
        usage:
          $ref: "#/components/schemas/TradingUsage"
        system_fingerprint:
          type: string
          description: ğŸ–‹ï¸ ç³»ç»ŸæŒ‡çº¹æ ‡è¯†

    TradingChoice:
      type: object
      required:
        - index
        - message
        - finish_reason
      properties:
        index:
          type: integer
          description: ğŸ“Š åˆ†æé€‰æ‹©ç´¢å¼•
        message:
          $ref: "#/components/schemas/TradingMessage"
        finish_reason:
          type: string
          enum:
            - stop
            - length
            - tool_calls
            - content_filter
          description: ğŸ åˆ†æå®ŒæˆåŸå› 

    TradingUsage:
      type: object
      required:
        - prompt_tokens
        - completion_tokens
        - total_tokens
      properties:
        prompt_tokens:
          type: integer
          description: ğŸ“¥ è¾“å…¥tokenæ•°é‡
        completion_tokens:
          type: integer
          description: ğŸ“¤ åˆ†æè¾“å‡ºtokenæ•°é‡
        total_tokens:
          type: integer
          description: ğŸ“Š æ€»tokenä½¿ç”¨é‡
        completion_tokens_details:
          type: object
          properties:
            reasoning_tokens:
              type: integer
              description: ğŸ§  äº¤æ˜“æ¨ç†tokenæ•°é‡ï¼ˆé«˜ç²¾åº¦åˆ†æï¼‰